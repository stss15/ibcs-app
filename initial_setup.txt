IBCS APP — INITIAL SETUP (FLAT STACK POC)

Goal
Serve a React single-page app from GitHub Pages with a Cloudflare Worker handling all authentication and InstantDB access (teachers, classes, students).

Prerequisites
- GitHub Pages enabled for the repo (`stss15/ibcs-app`)
- Node.js 18+ with npm
- InstantDB App ID + Admin Token (used for Worker secrets)
- Cloudflare account with Workers access

1. Project layout
```
frontend/               # React + Vite SPA
  src/lib/api.js       # Worker API client
  src/lib/config.js    # Loads app-config.json (worker URL)
public/app-config.json # API_BASE (Cloudflare Worker URL)
src/                    # Legacy static pages & styles (landing)
```

2. Install dependencies
```bash
npm install
```

3. Configure runtime
`public/app-config.json`
```json
{
  "API_BASE": "https://ibcs-auth.<your-subdomain>.workers.dev"
}
```
Copy to `frontend/dist/app-config.json` for GitHub Pages deployments.

4. Run locally
```bash
npm run dev --prefix frontend
```
Vite serves at `http://localhost:5173/ibcs-app/` (base already set).

5. Build (local bundle)
```bash
npm run build --prefix frontend
```
Publish `frontend/dist` to the branch used by GitHub Pages.

6. Cloudflare Worker
- Secrets: `INSTANT_APP_ID`, `INSTANT_ADMIN_TOKEN`, `TOKEN_SECRET`, `SEED_KEY`
- Deploy: `cd worker && npx wrangler deploy`
- Seed teacher: `node worker/seed-teacher.js`

7. InstantDB collections (schemaless)
- teachers: `{ username, password, createdAt }
- classes: `{ className, description?, teacherUsername, createdAt, id }
- students: `{ name, username?, password, classId, teacherUsername, createdAt }

8. Verification
1. Open https://stss15.github.io/ibcs-app/
2. Log in as Teacher (`MrStewart / Dragon-S25052`)
3. Create a class
4. Add a student (`Alice / student123`)
5. Refresh — class & student persist
6. Log in as `Alice` (student) to see assigned class

9. Cleanup after demo
- Rotate the InstantDB admin token
- Rotate the Cloudflare Worker `TOKEN_SECRET`
- Harden Worker rules (rate limits, logging, permissions)
